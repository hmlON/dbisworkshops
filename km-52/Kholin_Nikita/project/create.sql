create table AUTH_USER
(
	ID NUMBER(11) generated by default on null as identity
		primary key,
	PASSWORD NVARCHAR2(128),
	LAST_LOGIN TIMESTAMP(6),
	IS_SUPERUSER NUMBER(1) not null
		check ("IS_SUPERUSER" IN (0,1)),
	USERNAME NVARCHAR2(150)
		unique,
	FIRST_NAME NVARCHAR2(30),
	LAST_NAME NVARCHAR2(150),
	EMAIL NVARCHAR2(254),
	IS_STAFF NUMBER(1) not null
		check ("IS_STAFF" IN (0,1)),
	IS_ACTIVE NUMBER(1) not null
		check ("IS_ACTIVE" IN (0,1)),
	DATE_JOINED TIMESTAMP(6) not null
)
/

--
-- Create model Artist
--
CREATE TABLE "INTEGRATIONS_ARTIST" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY, "INTEGRATION_ARTIST_ID" NVARCHAR2(256) NULL, "NAME" NVARCHAR2(256) NULL, "CREATED_AT" TIMESTAMP NOT NULL, "UPDATED_AT" TIMESTAMP NOT NULL);
--
-- Create model Integration
--
CREATE TABLE "INTEGRATIONS_INTEGRATION" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY, "IDENTIFIER" NVARCHAR2(50) NULL, "ACCESS_TOKEN" NVARCHAR2(256) NULL, "REFRESH_TOKEN" NVARCHAR2(256) NULL, "INTEGRATION_USER_ID" NVARCHAR2(256) NULL, "CREATED_AT" TIMESTAMP NOT NULL, "UPDATED_AT" TIMESTAMP NOT NULL, "USER_ID" NUMBER(11) NOT NULL);
--
-- Create model Release
--
CREATE TABLE "INTEGRATIONS_RELEASE" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY, "INTEGRATION_RELEASE_ID" NVARCHAR2(256) NULL, "TITLE" NVARCHAR2(256) NULL, "COVER_URL" NVARCHAR2(256) NULL, "DATE" DATE NOT NULL, "RELEASE_TYPE" NVARCHAR2(256) NULL, "CREATED_AT" TIMESTAMP NOT NULL, "UPDATED_AT" TIMESTAMP NOT NULL, "ARTIST_ID" NUMBER(11) NOT NULL);
--
-- Add field integration to artist
--
ALTER TABLE "INTEGRATIONS_ARTIST" ADD "INTEGRATION_ID" NUMBER(11) NOT NULL;
ALTER TABLE "INTEGRATIONS_INTEGRATION" ADD CONSTRAINT "INTEGRATI_USER_ID_65C1AC74_F" FOREIGN KEY ("USER_ID") REFERENCES "AUTH_USER" ("ID") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "INTEGRATIO_USER_ID_65C1AC74" ON "INTEGRATIONS_INTEGRATION" ("USER_ID");
ALTER TABLE "INTEGRATIONS_RELEASE" ADD CONSTRAINT "INTEGRATI_ARTIST_ID_BE0F57AD_F" FOREIGN KEY ("ARTIST_ID") REFERENCES "INTEGRATIONS_ARTIST" ("ID") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "INTEGRATIO_ARTIST_ID_BE0F57AD" ON "INTEGRATIONS_RELEASE" ("ARTIST_ID");
CREATE INDEX "INTEGRATIO_INTEGRATIO_3899EA33" ON "INTEGRATIONS_ARTIST" ("INTEGRATION_ID");
ALTER TABLE "INTEGRATIONS_ARTIST" ADD CONSTRAINT "INTEGRATI_INTEGRATI_3899EA33_F" FOREIGN KEY ("INTEGRATION_ID") REFERENCES "INTEGRATIONS_INTEGRATION" ("ID") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

Nikita Kholin, [06.01.19 17:15]
--
-- Alter unique_together for integration (1 constraint(s))
--
ALTER TABLE "INTEGRATIONS_INTEGRATION" ADD CONSTRAINT "INTEGRATI_USER_ID_I_0E8E82D3_U" UNIQUE ("USER_ID", "IDENTIFIER");
COMMIT;

Nikita Kholin, [06.01.19 17:16]
--
-- Create model Notification
--
CREATE TABLE "NOTIFICATIONS_NOTIFICATION" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY, "CHANNEL" NVARCHAR2(50) NULL, "LAST_SENT_AT" TIMESTAMP NOT NULL, "ENABLED" NUMBER(1) NOT NULL CHECK ("ENABLED" IN (0,1)), "CONNECT_TOKEN" NVARCHAR2(64) NULL, "CHANNEL_ID" NVARCHAR2(64) NULL, "CREATED_AT" TIMESTAMP NOT NULL, "UPDATED_AT" TIMESTAMP NOT NULL, "USER_ID" NUMBER(11) NOT NULL);
ALTER TABLE "NOTIFICATIONS_NOTIFICATION" ADD CONSTRAINT "NOTIFICAT_USER_ID_B5E8C0FF_F" FOREIGN KEY ("USER_ID") REFERENCES "AUTH_USER" ("ID") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "NOTIFICATI_USER_ID_B5E8C0FF" ON "NOTIFICATIONS_NOTIFICATION" ("USER_ID");
COMMIT;

Nikita Kholin, [06.01.19 17:16]
--
-- Alter unique_together for notification (1 constraint(s))
--
ALTER TABLE "NOTIFICATIONS_NOTIFICATION" ADD CONSTRAINT "NOTIFICAT_USER_ID_C_1DD713CA_U" UNIQUE ("USER_ID", "CHANNEL");
COMMIT;